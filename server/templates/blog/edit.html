{% extends 'base.html' %}
{% load static %}

{% block style %}
    {{ block.super }}
    <link href="{% static "css/blog/edit.css" %}" rel="stylesheet">
{% endblock %}


{% block content %}
<div class="container ">
    <form method="post" name="qwe">
        <input type="text" name="title" placeholder="Заголовок..." id="post-title" class="editor__title">
        <div id="editorjs" name="content"></div>
    </form>
		<button id="saveButton">Save</button>
</div>
{% endblock %}

{% block scripts %}
    {{ block.super }}
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/editorjs@latest"></script>  <!-- Core -->

    <script src="{% static 'js/editorjs/code.js' %}"></script> <!-- Code -->
    <script src="{% static 'js/editorjs/image.js' %}"></script> <!-- Image -->

    <script src="https://cdn.jsdelivr.net/npm/@editorjs/list@latest"></script> <!-- List -->
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/image@latest"></script> <!-- Images -->
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/inline-code@latest"></script> <!-- Inline code -->
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/delimiter@latest"></script> <!-- Delimeter -->
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/quote@latest"></script> <!-- Quote -->
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/warning@latest"></script> <!-- Warning -->
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/marker@latest"></script> <!-- Marker -->
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/header@latest"></script> <!-- Header -->
{% endblock %}

{% block domready %}
const saveButton = document.getElementById('saveButton');

const editor = new EditorJS({
	holder: 'editorjs',
	tools: {
		header: Header,
	    list: {
	      class: List,
	      inlineToolbar: true
	    },
	    inlineCode: {
	      class: InlineCode,
	      shortcut: 'CMD+SHIFT+M',
	    },
	    delimiter: Delimiter,
	    quote: {
	      class: Quote,
	      inlineToolbar: true,
	      shortcut: 'CMD+SHIFT+O',
	      config: {
	        quotePlaceholder: 'Enter a quote',
	        captionPlaceholder: 'Quote\'s author',
	      },
	  	},
	  	warning: {
	      class: Warning,
	      inlineToolbar: true,
	      shortcut: 'CMD+SHIFT+W',
	      config: {
	        titlePlaceholder: 'Title',
	        messagePlaceholder: 'Message',
	      },
	    },
	    Marker: {
	      class: Marker,
	      shortcut: 'CMD+SHIFT+M',
	    },
	    codeBox: {
          class: CodeBox,
          config: {
            themeURL: 'https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.1/build/styles/dracula.min.css', // Optional
            themeName: 'atom-one-dark', // Optional
            useDefaultTheme: 'light' // Optional. This also determines the background color of the language select drop-down
          }
        },
	},
});
saveButton.addEventListener('click', function () {
      editor.save().then((savedData) => {
		console.log(savedData);
		var title = $("#post-title").val();
		$.ajax({
        url: '',
        type: 'POST',
        data: { json: JSON.stringify({
			"title": title,
            "content": savedData,
        })},
        dataType: 'json'
    });

      });
    });

{% endblock %}